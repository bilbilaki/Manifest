# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: curl https://raw.githubusercontent.com/Galaxy-J5-Unofficial-LineageOS-Sources/Manifest/lineage-20.0-enforcing-Vanilla/Scripts/environment.sh > environment.sh &&sh environment.sh &&mkdir -p ~/android/lineage && cd ~/android/lineage &&repo init -u https://github.com/Galaxy-J5-Unofficial-LineageOS-Sources/Manifest.git -b lineage-20.0-enforcing-Vanilla && mkdir -p .repo/local_manifests &&curl https://raw.githubusercontent.com/Galaxy-J5-Unofficial-LineageOS/Manifest/lineage-20.0-enforcing-Vanilla/Manifests/manifest.xml > .repo/local_manifests/manifest.xml &&  curl https://raw.githubusercontent.com/Galaxy-J5-Unofficial-LineageOS/Manifest/lineage-20.0-enforcing-Vanilla/Manifests/gapps.xml > .repo/local_manifests/gapps.xml&& repo sync -c -j$(nproc --all) --force-sync --no-clone-bundle --no-tags && source build/envsetup.sh &&patch -d art -p1 < .repo/manifests/patches/art/art.patch &&patch -d bionic -p1 < .repo/manifests/patches/bionic/0001-HACK-allow-text-relocations.patch&&patch -d bionic -p1 < .repo/manifests/patches/bionic/0002-linker-Apply-TARGET_PROCESS_SDK_VERSION_OVERRIDE-on-.patch&&  patch -d bionic -p1 < .repo/manifests/patches/bionic/0003-Hack-Ignore-invalid-pthread_t-to-s.patch&&patch -d bionic -p1 < .repo/manifests/patches/bionic/0004-Implement-per-process-target-SDK-version-override.patch && patch -d bionic -p1 < .repo/manifests/patches/bionic/0005-bionic-Squash-of-pre-P-mutex-behavior-restoration.patch &&patch -d bionic -p1 < .repo/manifests/patches/bionic/0006-bionic-Sort-and-cache-hosts-file-data-for-fast-looku.patch && patch -d bionic -p1 < .repo/manifests/patches/bionic/0007-bionic-Support-wildcards-in-cached-hosts-file.patch&& patch -d device/lineage/sepolicy -p1 < .repo/manifests/patches/device_lineage_sepolicy/0001-legacy-camera-HAL1-sepolicy.patch &&patch -d external/perfetto -p1 < .repo/manifests/patches/external_perfetto/0001-perfetto-Conditionally-remove-version-check-for-memf.patch &&patch -d frameworks/base -p1 < .repo/manifests/patches/frameworks_base/0002-Disable-vendor-mismatch-warning.patch&& patch -d frameworks/base -p1 < .repo/manifests/patches/frameworks_base/0012-core-Remove-old-app-target-SDK-dialog.patch &&patch -d frameworks/base -p1 < .repo/manifests/patches/frameworks_base/0001-Revert-Fix-process-group-of-webview-zygote.patch &&patch -d frameworks/base -p1 < .repo/manifests/patches/frameworks_base/fw.patch&& patch -d frameworks/base -p1 < .repo/manifests/patches/frameworks_base/0003-Add-support-for-app-signature-spoofing.patch &&patch -d frameworks/libs/net -p1 < .repo/manifests/patches/frameworks_libs_net/0001-bpfheaders-don-t-abort-if-mMapFd-0.patch &&patch -d frameworks/libs/net -p1 < .repo/manifests/patches/frameworks_libs_net/0001-Restore-isBPF-supported-for-T.patch &&patch -d frameworks/native -p1 < .repo/manifests/patches/frameworks_native/0001-GraphicBuffer.cpp-hack-don-t-set-handle-to-0.patch&&patch -d frameworks/native -p1 < .repo/manifests/patches/frameworks_native/0002-SurfaceFlinger-Don-t-cleanup-resources-from-previous.patch&&patch -d frameworks/native -p1 < .repo/manifests/patches/frameworks_native/0003-SurfaceFlinger-Don-t-cleanup-resources-from-previous.patch&&patch -d frameworks/native -p1 < .repo/manifests/patches/frameworks_native/0004-SurfaceFlinger-Don-t-cleanup-resources-from-previous.patch&&patch -d frameworks/native -p1 < .repo/manifests/patches/frameworks_native/0003-gpuservice-only-start-if-ro.kernel.ebpf.supported-is.patch&&patch -d hardware/interfaces -p1 < .repo/manifests/patches/hardware_interfaces/0001-Revert-audio-use-binder-threadpool.patch&&patch -d hardware/interfaces -p1 < .repo/manifests/patches/hardware_interfaces/0001-Revert-load-bluetooth-aidl.patch&&repopick -P hardware/interfaces 320531-320532       # twelve-qcom-cam&& patch -d hardware/interfaces -p1 < .repo/manifests/patches/hardware_interfaces/0001-interfaces_drop_qti_camera_device_defaults.patch&& patch -d hardware/lineage/interfaces -p1 < .repo/manifests/patches/hardware_lineage_interfaces/0001-Restore-vendor.lineage.power-1.0-HIDL.patch&&patch -d hardware/lineage/interfaces -p1 < .repo/manifests/patches/hardware_lineage_interfaces/0002-Restore-vendor.lineage.biometrics.fingerprint.inscre.patch &&patch -d hardware/lineage/interfaces -p1 < .repo/manifests/patches/hardware_lineage_interfaces/0003-Restore-power-HAL.patch &&patch -d hardware/lineage/interfaces -p1 < .repo/manifests/patches/hardware_lineage_interfaces/0004-wifi-fix-legacy-HIDL-for-T.patch&&patch -d hardware/lineage/interfaces -p1 < .repo/manifests/patches/hardware_lineage_interfaces/0005-wifi-hidl_struct_util.cpp-convertLegacyWifiChannelWi.patch&& patch -d hardware/lineage/interfaces -p1 < .repo/manifests/patches/hardware_lineage_interfaces/0006-wifi-wifi.h-fix-build-undef-NAN.patch&& patch -d hardware/qcom-caf/bt -p1 < .repo/manifests/patches/hardware_qcom_caf_bluetooth/0001.skip_qcom_caf_bt_building.patch&&patch -d system/memory/lmkd -p1 < .repo/manifests/patches/system_memory_lmkd/0001-lmkd-fixup.patch&& patch -d  packages/apps/SetupWizard -p1 < .repo/manifests/patches/packages_apps_SetupWizard/0001-Setupwizard-remove-SIM-setup-screen.patch &&patch -d  packages/modules/adb/ -p1 < .repo/manifests/patches/packages_modules_adb/adb.patch&& patch -d  packages/modules/Bluetooth/ -p1 < .repo/manifests/patches/packages_modules_bluetooth/0001-Additionally-check-le_set_event_mask-command-resturn.patch&& patch -d  packages/modules/Bluetooth/ -p1 < .repo/manifests/patches/packages_modules_bluetooth/0002-gd-hci-Ignore-unexpected-status-events.patch&&patch -d  packages/modules/Bluetooth/ -p1 < .repo/manifests/patches/packages_modules_bluetooth/0003-audio_hal_interface-Optionally-use-sysbta-HAL.patch&&patch -d packages/modules/Connectivity -p1 < .repo/manifests/patches/packages_modules_connectivity/0001-refresh-netd-patch.patch&&patch -d packages/modules/Connectivity -p1 < .repo/manifests/patches/packages_modules_connectivity/0001-Fix-systemUI-reboot.patch && patch -d packages/modules/NetworkStack -p1 < .repo/manifests/patches/packages_modules_NetworkStack/0001-Revert-Enable-parsing-netlink-events-from-kernel-sin.patch && patch -d system/bpf -p1 < .repo/manifests/patches/system_bpf/0001-Restore-isBPF-supported-for-T.patch&&patch -d system/core -p1 < .repo/manifests/patches/system_core/0001-Revert-init-Treat-failure-to-create-a-process-group-.patch&& patch -d system/core -p1 < .repo/manifests/patches/system_core/0001-Fix-samsung-healthd-building.patch && patch -d system/core -p1 < .repo/manifests/patches/system_core/0002-Revert-healthd-charger-allow-home-button-to-wake.patch && patch -d system/core -p1 < .repo/manifests/patches/system_core/0001-Camera-Add-feature-extensions.patch && patch -d system/netd -p1 < .repo/manifests/patches/system_netd/0001-netd-Allow-devices-to-force-add-directly-connected-r.patch&& patch -d system/netd -p1 < .repo/manifests/patches/system_netd/0002-Revert-netd-make-BandwidthController-startup-failure.patch && patch -d vendor/qcom/opensource/commonsys-intf/display -p1 < .repo/manifests/patches/vendor_qcom_opensource_commonsys_intf_display/0001-Revert-Hookup-GRALLOC_HANDLE_HAS_RESERVED_SIZE.patch && brunch j5nlte  


      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.
